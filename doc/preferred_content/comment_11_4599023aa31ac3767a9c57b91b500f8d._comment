[[!comment format=mdwn
 username="https://www.google.com/accounts/o8/id?id=AItOawnDx6KWBl4PpP7qikNB7rp0hK_UvwQq_L0"
 nickname="Александр"
 subject="Dropping files from remotes"
 date="2014-11-05T16:09:54Z"
 content="""
I think I found a bug where git-annex assistant starts to drop files in remote repos when it shouldn't. It can be easily reproduced with latest version in Debian Jessy (5.20141024) like this:

Create 3 repos:

* A -- standard, archive
* m1 -- standard, manual
* m2 -- standard, manual

System has 3 files annexed: file1, file2, file3. Repo \"A\" has all three files, m1 has none, m2 has file3.

So, while in m1:

    m1 $ git annex find --want-drop --in m2
    file3

file3 shouln't be dropped from m2. There is no reason to do this. m2 is set as manual, and it shouldn't be touched in any case.

Now, let's get this file in m1:

    m1 $ git annex get file3
    get file3 (from m2...) ok
    (Recording state in git...)
    m1 $ git annex find --want-drop --in m2

So when 'file3' is present in local repo, it's not going to be dropped from m2.

I guess that rule 'present' works in local repo context while 'drop' acts on remote files.

"""]]
