[[!comment format=mdwn
 username="joey"
 subject="""comment 4"""
 date="2019-09-27T17:01:28Z"
 content="""
Setting annex.largefiles=nothing also makes `git annex add` add all files
to git, which I think is not what you were intending it to do.

> When `neverlock` is active and `git add` is run on a largefile, it could reject adding the file,

Git's interface does not allow me to do that. The clean filter can't
prevent a file from being added; even if it exits nonzero git will just go
ahead and add the file content.

I've implemented `git annex adjust --lock`. It doesn't fully prevent
other commands from making unlocked files. Any change to `git add` 
behavior faces the problems I discuss in [[lets_discuss_git_add_behavior]].
And `git annex unlock` can still be used. So
[[todo/auto-lock_files_after_one_edit]] would be a nice complement to this.
"""]]
