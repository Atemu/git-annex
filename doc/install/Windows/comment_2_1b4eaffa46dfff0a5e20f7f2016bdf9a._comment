[[!comment format=mdwn
 username="https://www.google.com/accounts/o8/id?id=AItOawkGCmVc5qIJaQQgG82Hc5zzBdAVdhe2JEM"
 nickname="Bruno"
 subject="comment 2"
 date="2013-05-16T02:22:26Z"
 content="""
By doing `cabal install --only-dependencies -v3` I saw that the problem was that it didn't find `sys/times.h`:

    In file included from C:\cygwin\tmp\36.c:1:0:
    include/HsUnix.h:33:23: fatal error: sys/times.h: No such file or directory
    compilation terminated.
    (\"C:\\Program Files (x86)\\Haskell Platform\\2012.4.0.0\\mingw\\bin\\gcc.exe\",[\"-Wl,--hash-size=31\",\"-Wl,--reduce-memory-overheads\",\"C:\\cygwin\\tmp\\36.c\",\"-o\",\"C:\\cygwin\\tmp\\36\",\"-E\",\"-D__GLASGOW_HASKELL__=704\",\"-Dmingw32_HOST_OS=1\",\"-Di386_HOST_ARCH=1\",\"-Idist\\build\\autogen\",\"-Iinclude\",\"-I.\",\"-IC:\\Program Files (x86)\\Haskell Platform\\2012.4.0.0\\lib\\time-1.4\\include\",\"-IC:\\Program Files (x86)\\Haskell Platform\\2012.4.0.0\\lib\\Win32-2.2.2.0\\include\",\"-IC:\\Program Files (x86)\\Haskell Platform\\2012.4.0.0\\lib\\bytestring-0.9.2.1\\include\",\"-IC:\\Program Files (x86)\\Haskell Platform\\2012.4.0.0\\lib\\base-4.5.1.0\\include\",\"-IC:\\Program Files (x86)\\Haskell Platform\\2012.4.0.0\\lib/include\"])
    C:\Program Files (x86)\Haskell Platform\2012.4.0.0\mingw\bin\gcc.exe returned
    ExitFailure 1 with error message:
    In file included from C:\cygwin\tmp\36.c:1:0:
    include/HsUnix.h:33:23: fatal error: sys/times.h: No such file or directory
    compilation terminated.
    cabal.exe: Missing dependencies on foreign libraries:
    * Missing (or bad) header file: HsUnix.h
    * Missing C libraries: rt, dl
    This problem can usually be solved by installing the system packages that
    provide these libraries (you may need the \"-dev\" versions). If the libraries
    are already installed but in a non-standard location then you can use the
    flags --extra-include-dirs= and --extra-lib-dirs= to specify where they are.
    If the header file does exist, it may contain errors that are caught by the C
    compiler at the preprocessing stage. In this case you can re-run configure
    with the verbosity flag -v3 to see the error messages.
    Failed to install unix-2.6.0.1

Is it normal that cabal use mingw's gcc (from the Haskell Platform)?

If so, should the following command work (I'm not sure if mixing mingw and cygwin stuff is ok) ?

cabal install --only-dependencies -v3 --extra-include-dirs=C:\\cygwin\\usr\\include --extra-lib-dirs=c:\\cygwin\\lib

    configure: WARNING: unrecognized options: --with-compiler, --with-gcc
    Reading parameters from .\unix.buildinfo
    (\"C:\\Program Files (x86)\\Haskell Platform\\2012.4.0.0\\mingw\\bin\\gcc.exe\",[\"-Wl,--hash-size=31\",\"-Wl,--reduce-memory-overheads\",\"C:\\cygwin\\tmp\\3504.c\",\"-o\",\"C:\\cygwin\\tmp\\3504\",\"-D__GLASGOW_HASKELL__=704\",\"-Dmingw32_HOST_OS=1\",\"-Di386_HOST_ARCH=1\",\"-Idist\\build\\autogen\",\"-Iinclude\",\"-IC:\\cygwin\\usr\\include\",\"-I.\",\"-IC:\\Program Files (x86)\\Haskell Platform\\2012.4.0.0\\lib\\time-1.4\\include\",\"-IC:\\Program Files (x86)\\Haskell Platform\\2012.4.0.0\\lib\\Win32-2.2.2.0\\include\",\"-IC:\\Program Files (x86)\\Haskell Platform\\2012.4.0.0\\lib\\bytestring-0.9.2.1\\include\",\"-IC:\\Program Files (x86)\\Haskell Platform\\2012.4.0.0\\lib\\base-4.5.1.0\\include\",\"-IC:\\Program Files (x86)\\Haskell Platform\\2012.4.0.0\\lib/include\",\"-lrt\",\"-ldl\",\"-Lc:\\cygwin\\lib\",\"-LC:\\Program Files (x86)\\Haskell Platform\\2012.4.0.0\\lib\\time-1.4\",\"-LC:\\Program Files (x86)\\Haskell Platform\\2012.4.0.0\\lib\\old-locale-1.0.0.4\",\"-LC:\\Program Files (x86)\\Haskell Platform\\2012.4.0.0\\lib\\deepseq-1.3.0.0\",\"-LC:\\Program Files (x86)\\Haskell Platform\\2012.4.0.0\\lib\\array-0.4.0.0\",\"-LC:\\Program Files (x86)\\Haskell Platform\\2012.4.0.0\\lib\\Win32-2.2.2.0\",\"-LC:\\Program Files (x86)\\Haskell Platform\\2012.4.0.0\\lib\\bytestring-0.9.2.1\",\"-LC:\\Program Files (x86)\\Haskell Platform\\2012.4.0.0\\lib\\base-4.5.1.0\",\"-LC:\\Program Files (x86)\\Haskell Platform\\2012.4.0.0\\lib\\integer-gmp-0.4.0.0\",\"-LC:\\Program Files (x86)\\Haskell Platform\\2012.4.0.0\\lib\\ghc-prim-0.2.0.0\",\"-LC:\\Program Files (x86)\\Haskell Platform\\2012.4.0.0\\lib\"])
    C:\Program Files (x86)\Haskell Platform\2012.4.0.0\mingw\bin\gcc.exe returned
    ExitFailure 1 with error message:
    In file included from include/HsUnix.h:39:0,
    from C:\cygwin\tmp\3504.c:1:
    C:\cygwin\usr\include/sys/resource.h:76:29: error: expected declaration
    specifiers or '...' before 'id_t'
    C:\cygwin\usr\include/sys/resource.h:77:29: error: expected declaration
    specifiers or '...' before 'id_t'
    In file included from C:\cygwin\usr\include/dirent.h:6:0,
    from include/HsUnix.h:75,
    from C:\cygwin\tmp\3504.c:1:
    C:\cygwin\usr\include/sys/dirent.h:24:3: error: expected
    specifier-qualifier-list before '__ino64_t'
"""]]
