From 0eba6e68ed23a2901d63b77438da2015af9d7a7a Mon Sep 17 00:00:00 2001
From: Joey Hess <joey@kitenet.net>
Date: Sat, 4 May 2013 15:32:58 -0400
Subject: [PATCH] fix build

Update to newer exception library.

Cross building the executable fails at strip time, so disable it.
---
 Network/AWS/.AWSConnection.hs.swp | Bin 4096 -> 0 bytes
 Network/AWS/AWSConnection.hs      |   3 +++
 hS3.cabal                         |   3 ---
 3 files changed, 3 insertions(+), 3 deletions(-)
 delete mode 100644 Network/AWS/.AWSConnection.hs.swp

diff --git a/Network/AWS/.AWSConnection.hs.swp b/Network/AWS/.AWSConnection.hs.swp
deleted file mode 100644
index ccbf6d0439a7f0878b13229c973afe7518a48f8e..0000000000000000000000000000000000000000
GIT binary patch
literal 0
HcmV?d00001

literal 4096
zcmYc?2=nw+FxN9?00IF92DPNtK=V%=3?5Pp3|aZ9l^|h4AU&^?kP@(b9mqialH3CQ
zj9_D313gncGkw3*lJfkbY<<V@U=ViB&&x|qF3HT#)5|C(%Ft0oqaiRF0z`%YFN3j>
up@FiJqJpqcD3N+bm5qkLXb6mkz-S1JhQMeDjE2By2#kinXb23K5C8xpjT&eG

diff --git a/Network/AWS/AWSConnection.hs b/Network/AWS/AWSConnection.hs
index 9a76961..76c3642 100644
--- a/Network/AWS/AWSConnection.hs
+++ b/Network/AWS/AWSConnection.hs
@@ -16,6 +16,7 @@ module Network.AWS.AWSConnection (
    ) where
 
 import System.Environment
+import Control.Exception
 
 -- | An Amazon Web Services connection.  Everything needed to connect
 --   and authenticate requests.
@@ -57,3 +58,5 @@ amazonS3ConnectionFromEnv =
                   ( _,  _,  _) -> Just (amazonS3Connection ak sk0)
     where getEnvKey s = catch (getEnv s) (const $ return "")
 
+catchIO :: IO a -> (IOException -> IO a) -> IO a
+catchIO = catch
diff --git a/hS3.cabal b/hS3.cabal
index aefb1ca..32e90b5 100644
--- a/hS3.cabal
+++ b/hS3.cabal
@@ -44,6 +44,3 @@ Library
         Network.AWS.AWSConnection,
         Network.AWS.Authentication,
         Network.AWS.ArrowUtils
-
-Executable     hs3
-  main-is:        hS3.hs
-- 
1.8.2.rc3

